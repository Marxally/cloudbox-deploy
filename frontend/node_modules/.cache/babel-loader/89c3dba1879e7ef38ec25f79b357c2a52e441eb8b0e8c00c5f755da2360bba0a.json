{"ast":null,"code":"// src/api/gameApi.js - Updated for production deployment\n\n// Determine API URL based on environment\nconst getApiBaseUrl = () => {\n  if (typeof window !== 'undefined') {\n    // In browser: use relative path for production, localhost for development\n    const isProduction = window.location.hostname !== 'localhost';\n    return isProduction ? '/api' : 'http://localhost:5000/api';\n  }\n  // For server-side rendering (if needed)\n  return process.env.NODE_ENV === 'production' ? '/api' : 'http://localhost:5000/api';\n};\nconst API_BASE_URL = getApiBaseUrl();\n\n/**\r\n * Fetches games from the CloudBox backend API\r\n */\nexport async function fetchGames(refresh = false, limit = null) {\n  try {\n    let url = `${API_BASE_URL}/games`;\n    const params = [];\n    if (refresh) params.push('refresh=true');\n    if (limit) params.push(`limit=${limit}`);\n    if (params.length > 0) {\n      url += '?' + params.join('&');\n    }\n    console.log(`Fetching games from: ${url}`);\n    const response = await fetch(url);\n    if (response.ok) {\n      const data = await response.json();\n      // Handle both formats: new format has 'games' property, old format is array\n      const games = data.games || data;\n      console.log(`✅ Fetched ${games.length} games from API`);\n      return games;\n    } else {\n      console.warn(`API returned ${response.status}, using fallback data`);\n      return getFallbackGames();\n    }\n  } catch (error) {\n    console.warn('Network error:', error.message);\n    console.warn('Using fallback games data');\n    return getFallbackGames();\n  }\n}\n\n/**\r\n * Force refresh games from scraper\r\n */\nexport async function refreshGames() {\n  try {\n    const response = await fetch(`${API_BASE_URL}/refresh`);\n    if (response.ok) {\n      const data = await response.json();\n      return data;\n    }\n  } catch (error) {\n    console.error('Refresh failed:', error);\n  }\n  return null;\n}\n\n/**\r\n * Get statistics\r\n */\nexport async function getStats() {\n  try {\n    const response = await fetch(`${API_BASE_URL}/stats`);\n    if (response.ok) {\n      return await response.json();\n    }\n  } catch (error) {\n    console.error('Failed to get stats:', error);\n  }\n  return null;\n}\n\n/**\r\n * Get services info\r\n */\nexport async function getServices() {\n  try {\n    const response = await fetch(`${API_BASE_URL}/services`);\n    if (response.ok) {\n      return await response.json();\n    }\n  } catch (error) {\n    console.error('Failed to get services:', error);\n  }\n  return null;\n}\n\n/**\r\n * Search games\r\n */\nexport async function searchGames(query, service = null) {\n  try {\n    let url = `${API_BASE_URL}/search?q=${encodeURIComponent(query)}`;\n    if (service) {\n      url += `&service=${service}`;\n    }\n    const response = await fetch(url);\n    if (response.ok) {\n      return await response.json();\n    }\n  } catch (error) {\n    console.error('Search failed:', error);\n  }\n  return {\n    games: [],\n    count: 0\n  };\n}\n\n/**\r\n * Get game by ID\r\n */\nexport async function getGameById(id) {\n  try {\n    const response = await fetch(`${API_BASE_URL}/games/${id}`);\n    if (response.ok) {\n      const data = await response.json();\n      return data.game;\n    }\n  } catch (error) {\n    console.error('Failed to get game:', error);\n  }\n  return null;\n}\n\n/**\r\n * Fallback games data\r\n */\nfunction getFallbackGames() {\n  return [{\n    id: '1',\n    title: 'Cyberpunk 2077',\n    service: 'gfn',\n    imageUrl: 'https://images.igdb.com/igdb/image/upload/t_cover_big/co4a7y.jpg',\n    description: 'An open-world RPG set in Night City',\n    publisher: 'CD Projekt Red',\n    genre: 'RPG',\n    year: 2020,\n    score: 8.5,\n    url: 'https://www.nvidia.com/en-us/geforce-now/games/',\n    color: 'from-green-400 to-green-700'\n  }, {\n    id: '2',\n    title: 'Halo Infinite',\n    service: 'xbox',\n    imageUrl: 'https://images.igdb.com/igdb/image/upload/t_cover_big/co4rq7.jpg',\n    description: 'The next chapter in the Halo saga',\n    publisher: 'Xbox Game Studios',\n    genre: 'Shooter',\n    year: 2021,\n    score: 9.0,\n    url: 'https://www.xbox.com/en-US/play/games/halo-infinite',\n    color: 'from-blue-400 to-blue-700'\n  }];\n}","map":{"version":3,"names":["getApiBaseUrl","window","isProduction","location","hostname","process","env","NODE_ENV","API_BASE_URL","fetchGames","refresh","limit","url","params","push","length","join","console","log","response","fetch","ok","data","json","games","warn","status","getFallbackGames","error","message","refreshGames","getStats","getServices","searchGames","query","service","encodeURIComponent","count","getGameById","id","game","title","imageUrl","description","publisher","genre","year","score","color"],"sources":["C:/Users/marxa/Desktop/CloudBox/cloudbox-app/frontend/src/api/gameApi.js"],"sourcesContent":["// src/api/gameApi.js - Updated for production deployment\r\n\r\n// Determine API URL based on environment\r\nconst getApiBaseUrl = () => {\r\n  if (typeof window !== 'undefined') {\r\n    // In browser: use relative path for production, localhost for development\r\n    const isProduction = window.location.hostname !== 'localhost';\r\n    return isProduction ? '/api' : 'http://localhost:5000/api';\r\n  }\r\n  // For server-side rendering (if needed)\r\n  return process.env.NODE_ENV === 'production' ? '/api' : 'http://localhost:5000/api';\r\n};\r\n\r\nconst API_BASE_URL = getApiBaseUrl();\r\n\r\n/**\r\n * Fetches games from the CloudBox backend API\r\n */\r\nexport async function fetchGames(refresh = false, limit = null) {\r\n    try {\r\n        let url = `${API_BASE_URL}/games`;\r\n        const params = [];\r\n        \r\n        if (refresh) params.push('refresh=true');\r\n        if (limit) params.push(`limit=${limit}`);\r\n        \r\n        if (params.length > 0) {\r\n            url += '?' + params.join('&');\r\n        }\r\n        \r\n        console.log(`Fetching games from: ${url}`);\r\n        const response = await fetch(url);\r\n        \r\n        if (response.ok) {\r\n            const data = await response.json();\r\n            // Handle both formats: new format has 'games' property, old format is array\r\n            const games = data.games || data;\r\n            console.log(`✅ Fetched ${games.length} games from API`);\r\n            return games;\r\n        } else {\r\n            console.warn(`API returned ${response.status}, using fallback data`);\r\n            return getFallbackGames();\r\n        }\r\n    } catch (error) {\r\n        console.warn('Network error:', error.message);\r\n        console.warn('Using fallback games data');\r\n        return getFallbackGames();\r\n    }\r\n}\r\n\r\n/**\r\n * Force refresh games from scraper\r\n */\r\nexport async function refreshGames() {\r\n    try {\r\n        const response = await fetch(`${API_BASE_URL}/refresh`);\r\n        if (response.ok) {\r\n            const data = await response.json();\r\n            return data;\r\n        }\r\n    } catch (error) {\r\n        console.error('Refresh failed:', error);\r\n    }\r\n    return null;\r\n}\r\n\r\n/**\r\n * Get statistics\r\n */\r\nexport async function getStats() {\r\n    try {\r\n        const response = await fetch(`${API_BASE_URL}/stats`);\r\n        if (response.ok) {\r\n            return await response.json();\r\n        }\r\n    } catch (error) {\r\n        console.error('Failed to get stats:', error);\r\n    }\r\n    return null;\r\n}\r\n\r\n/**\r\n * Get services info\r\n */\r\nexport async function getServices() {\r\n    try {\r\n        const response = await fetch(`${API_BASE_URL}/services`);\r\n        if (response.ok) {\r\n            return await response.json();\r\n        }\r\n    } catch (error) {\r\n        console.error('Failed to get services:', error);\r\n    }\r\n    return null;\r\n}\r\n\r\n/**\r\n * Search games\r\n */\r\nexport async function searchGames(query, service = null) {\r\n    try {\r\n        let url = `${API_BASE_URL}/search?q=${encodeURIComponent(query)}`;\r\n        if (service) {\r\n            url += `&service=${service}`;\r\n        }\r\n        const response = await fetch(url);\r\n        if (response.ok) {\r\n            return await response.json();\r\n        }\r\n    } catch (error) {\r\n        console.error('Search failed:', error);\r\n    }\r\n    return { games: [], count: 0 };\r\n}\r\n\r\n/**\r\n * Get game by ID\r\n */\r\nexport async function getGameById(id) {\r\n    try {\r\n        const response = await fetch(`${API_BASE_URL}/games/${id}`);\r\n        if (response.ok) {\r\n            const data = await response.json();\r\n            return data.game;\r\n        }\r\n    } catch (error) {\r\n        console.error('Failed to get game:', error);\r\n    }\r\n    return null;\r\n}\r\n\r\n/**\r\n * Fallback games data\r\n */\r\nfunction getFallbackGames() {\r\n    return [\r\n        {\r\n            id: '1',\r\n            title: 'Cyberpunk 2077',\r\n            service: 'gfn',\r\n            imageUrl: 'https://images.igdb.com/igdb/image/upload/t_cover_big/co4a7y.jpg',\r\n            description: 'An open-world RPG set in Night City',\r\n            publisher: 'CD Projekt Red',\r\n            genre: 'RPG',\r\n            year: 2020,\r\n            score: 8.5,\r\n            url: 'https://www.nvidia.com/en-us/geforce-now/games/',\r\n            color: 'from-green-400 to-green-700'\r\n        },\r\n        {\r\n            id: '2',\r\n            title: 'Halo Infinite',\r\n            service: 'xbox',\r\n            imageUrl: 'https://images.igdb.com/igdb/image/upload/t_cover_big/co4rq7.jpg',\r\n            description: 'The next chapter in the Halo saga',\r\n            publisher: 'Xbox Game Studios',\r\n            genre: 'Shooter',\r\n            year: 2021,\r\n            score: 9.0,\r\n            url: 'https://www.xbox.com/en-US/play/games/halo-infinite',\r\n            color: 'from-blue-400 to-blue-700'\r\n        }\r\n    ];\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}